(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{386:function(t,e,s){},387:function(t,e,s){},409:function(t,e,s){"use strict";s(386)},410:function(t,e,s){"use strict";s(387)},461:function(t,e,s){"use strict";s.r(e);s(93),s(157);var o={name:"GoTop",data:()=>({show:!1}),mounted(){this.hasShow()},methods:{OpenToc(){this.$emit("toc")},hasShow(){const t=this;window.addEventListener("scroll",(function(e){let s=t.getScrollTop();t.show=s>400}))},GoTop(){window.scrollTo({top:0,behavior:"smooth"})},getScrollTop(){var t;if("undefined"!=typeof window)return window.pageYOffset?t=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t}}},n=(s(409),s(30)),a={name:"Posts",components:{TocBtn:Object(n.a)(o,(function(){var t=this._self._c;return t("span",[t("el-button",{staticClass:"toc-btn",attrs:{type:"primary",circle:""},on:{click:this.OpenToc}},[t("i",{staticClass:"iconfont icon-service-directory"})]),this._v(" "),t("el-button",{staticClass:"gotop-btn",class:{show:this.show},attrs:{type:"primary",circle:""},on:{click:this.GoTop}},[t("i",{staticClass:"el-icon-arrow-up"})])],1)}),[],!1,null,"5e64993e",null).exports,MyVssue:()=>Promise.all([s.e(0),s.e(4),s.e(40)]).then(s.bind(null,460))},data:()=>({nextPost:0,prevPost:3,allH:[],catalogList:[],currentIndex:0,offsetList:[],hasToc:!1}),props:{content:{type:Array,default:()=>[]}},created(){this.getPageIndex(),setTimeout(()=>{this.getPageIndex()},100)},mounted(){setTimeout(()=>{this.getH(),this.changeIndex()},20)},methods:{throttle(t,e,s){var o=null,n=Date.parse(new Date);return function(){null!==o&&clearTimeout(o);var a=Date.parse(new Date);a-n>=s?(t(),n=a):o=setTimeout(t,e)}},changeToc(){this.hasToc=!this.hasToc},getH(){if(this.catalogList.splice(0,this.catalogList.length),this.offsetList.splice(0,this.offsetList.length),this.allH.splice(0,this.allH.length),"undefined"==typeof window)return;if(!document.querySelector(".post-sign"))return;let t=[],e=document.querySelector(".post-sign").querySelectorAll("h1,h2,h3,h4,h5,h6");if(0===e.length)return;let s=[].slice.call(e);s.forEach((e,o)=>{if(this.allH.push(e.offsetTop),this.catalogList.push(e),0===o)t.push(0);else{let n=Number(e.tagName.slice(1)),a=Number(s[o-1].tagName.slice(1));n>a?t.push(t[o-1]+(n-a)):n<a?t.push(t[o-1]-(a-n)):t.push(t[o-1])}});let o=t.reduce((t,e)=>t>e?e:t),n=Math.abs(o);t.forEach(t=>{o<0&&(t+=n),o>0&&(t-=n),this.offsetList.push(t)})},getPageIndex(){if(0===this.content.length||1===this.content.length)return this.nextPost=NaN,void(this.prevPost=NaN);for(var t=0,e=this.content.length;t<e;t++)this.content[t].path===this.$page.path&&(t+1===this.content.length?(this.nextPost=NaN,this.prevPost=t-1):t-1<0?(this.nextPost=t+1,this.prevPost=NaN):(this.nextPost=t+1,this.prevPost=t-1))},getScrollTop(){var t;if("undefined"!=typeof window)return window.pageYOffset?t=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),t},changeIndex(){if("undefined"==typeof window)return;const t=this;window.addEventListener("scroll",t.throttle((function(e){if("/posts/"!==t.$route.path.slice(0,7))return;let s=t.getScrollTop();for(let e=0,o=t.allH.length;e<o;e++){if(e+1===t.allH.length||s<t.allH[e])return t.currentIndex=e;if(s>=t.allH[e]&&s<t.allH[e+1])return t.currentIndex=e}}),60,110)),window.addEventListener("scroll",(function(){if("/posts/"!==t.$route.path.slice(0,7))return;const e=document.getElementById("post-toc");let s=t.getScrollTop();s>=240?e.classList.add("fixed"):e.classList.remove("fixed");const o=document.getElementById("footerPost").offsetTop;s>=o-20&&e.classList.remove("fixed"),s<o&&s>=o-500&&e.classList.add("fixed")}))}},watch:{$route(t,e){"/posts/"===t.path.slice(0,7)&&(this.getPageIndex(),setTimeout(()=>{this.getH(),this.changeIndex()},20))},deep:!0}},i=(s(410),Object(n.a)(a,(function(){var t=this,e=t._self._c;return e("div",{key:t.$page.title},[e("el-row",{staticClass:"post-content",attrs:{type:"flex",justify:"center"}},[e("el-col",{staticClass:"post-card post-sign",attrs:{span:16,xs:{span:24},sm:{span:23},md:{span:23},lg:{span:16},id:"post-card"}},[e("Content"),t._v(" "),e("span",{attrs:{id:"footerPost"}})],1),t._v(" "),e("el-col",{staticClass:"post-toc",class:{"open-toc":t.hasToc},attrs:{span:6,id:"post-toc"}},[e("h4",{staticClass:"catalog-title"},[t._v("TOC")]),t._v(" "),e("div",{staticClass:"catalog-body"},[e("ul",{staticClass:"catalog-list",attrs:{id:"catalog-list"}},t._l(t.catalogList,(function(s,o){return e("li",{key:o,staticClass:"toc-li",class:{active:t.currentIndex===o}},[e("a",{staticClass:"toc-link ellipsis",style:{marginLeft:12*t.offsetList[o]+"px"},attrs:{href:"#"+s.id}},[t._v(t._s("H"+(t.offsetList[o]+1)+" . "+s.textContent.substring(2))+"\n            ")])])})),0)])])],1),t._v(" "),e("el-row",{staticClass:"post-nav",attrs:{type:"flex",justify:"space-around"}},[e("el-col",{staticClass:"post-prev",attrs:{span:7}},[isNaN(t.prevPost)?t._e():e("div",[e("router-link",{attrs:{to:t.content[t.prevPost].path||"/"}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" Prev\n        ")]),t._v(" "),e("router-link",{staticClass:"nav-title",attrs:{tag:"p",to:t.content[t.prevPost].path||"/"}},[t._v(t._s(t.content[t.prevPost].title))])],1)]),t._v(" "),e("el-col",{staticClass:"post-next",attrs:{lg:{pull:5},span:7}},[isNaN(t.nextPost)?t._e():e("div",[e("router-link",{attrs:{to:t.content[t.nextPost].path||"/"}},[t._v("\n          Next\n          "),e("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),e("router-link",{staticClass:"nav-title",attrs:{tag:"p",to:t.content[t.nextPost].path||"/"}},[t._v(t._s(t.content[t.nextPost].title))])],1)])],1),t._v(" "),e("el-row",{attrs:{type:"flex",justify:"center"}},[t.$themeConfig.vssue.need&&t.$page.title?e("el-col",{attrs:{span:23}},[e("ClientOnly",[e("my-vssue")],1)],1):t._e()],1),t._v(" "),e("toc-btn",{on:{toc:t.changeToc}})],1)}),[],!1,null,"537e97d7",null));e.default=i.exports}}]);